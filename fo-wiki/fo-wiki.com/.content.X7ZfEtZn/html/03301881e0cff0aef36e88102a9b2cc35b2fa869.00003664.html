<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>FO Quest Database</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
  /*<![CDATA[*/
  <!--
  body,td,th {
        font-size: 12px;
  }
  -->
  /*]]>*/
  </style>
  <script src="../content/trasfade.js" type="text/javascript"></script>
</head>
<body>
  <script language="javascript">
  <![CDATA[
    <!--
    function vc_sc(name, value, expires, path, domain, secure) {
            var today = new Date();
            today.setTime(today.getTime());
    
            if (expires)
            expires = expires * 1000 * 60;
    
            var expires_date = new Date(today.getTime() + expires);
    
            document.cookie = name + "=" + escape(value) +
            ((expires) ? ";expires=" + expires_date.toGMTString() : "") + 
            ((path) ? ";path=" + path : "" ) + 
            ((domain) ? ";domain=" + domain : "" ) +
            ((secure) ? ";secure" : "" );
    }
    
    var vc_freq_cap = 15; // Frequency cap in minutes
    
    var vc_rand = Math.floor(Math.random() * 7777);
    
    // Used to verify that we can set cookies
    //
    document.cookie = 'h2=o; path=/;';
    
    // Get the current window size to ensure we can view our ad
    //
    var vc_window_wt = 0;
    var vc_window_ht = 0;
    if (window.innerWidth && window.innerHeight) {
            vc_window_wt = window.innerWidth;
            vc_window_ht = window.innerHeight;
    }
    else if (document.documentElement.clientWidth > 0 && document.documentElement.clientHeight > 0) {
            vc_window_wt = document.documentElement.clientWidth;
            vc_window_ht = document.documentElement.clientHeight;
    }
    else {
            vc_window_wt = document.body.clientWidth;
            vc_window_ht = document.body.clientHeight;
    
    if (vc_window_ht > 1024) {
            vc_window_ht = 1024;
    }
    }
    
    if (document.cookie.indexOf('n=vue') <= 0 && document.cookie.indexOf('2=o') > 0 && document.cookie.indexOf('vccap=1') <= 0) {
            vc_sc('vccap', '1', vc_freq_cap, '/', null, null);
            document.write('<scr'+'ipt language="javascript" src="http://media.fastclick.net');
            document.write('/w/get.media?sid=57795&tm=12&m=4&tp=4&c=' + vc_rand);
            document.write('&window_ht=' + vc_window_ht + '&window_wt=' + vc_window_wt + '"><\/scr'+'ipt>');
    }
    // -->
  ]]>
  </script> 
  <script language="javascript">
  <![CDATA[

  <!--
    var dc=document; var date_ob=new Date();
    dc.cookie='h2=o; path=/;';var bust=date_ob.getSeconds();
    if(dc.cookie.indexOf('e=llo') <= 0 && dc.cookie.indexOf('2=o') > 0){
    dc.write('<scr'+'ipt language="javascript" src="http://media.fastclick.net');
    dc.write('/w/pop.cgi?sid=57795&m=2&tp=2&v=1.8&c='+bust+'"><\/scr'+'ipt>');
    date_ob.setTime(date_ob.getTime()+14400000);
    dc.cookie='he=llo; path=/; expires='+ date_ob.toGMTString();} // -->
  ]]>
  </script>
  <div style="position:absolute; left:0px; top:0px;"></div>
  <div id='homes' onmouseover="FadeOpacity('homes',30,100,300,20);" onmouseout="FadeOpacity('homes',100,30,300,20);" style="position:absolute; right:0px; top:20px; filter:alpha(opacity=30); opacity: 0.3; -moz-opacity:0.3;">
    <a href="../"><img src="../img/home_button.jpg" width="71" height="335" /></a>
  </div>
  <div style="margin-left:125px; margin-right:125px">
    <script src="../content/sha256.js" type="text/javascript"></script> 
    <script type="text/javascript" language="JavaScript">
    //<![CDATA[


                                                                function check()
                                                                {
                                                                        if ( document.form.QUname.value == '' )
                                                                        {
                                                                                alert('Please enter the Quest name!')
                                                                                return false;
                                                                        }
                                                                        if ( document.form.username.value == '' )
                                                                        {
                                                                                alert('Please enter your username!')
                                                                                return false;
                                                                        }
                                                                        if ( document.form.userpw.value == '' )
                                                                        {
                                                                                alert('Please enter your password!')
                                                                                return false;
                                                                        } else {
                                                                                document.form.userpw.value = SHA256(document.form.userpw.value);
                                                                        }
                                                                }
    //]]>
    </script> 
    <script type='text/javascript'>
    //<![CDATA[


                                                                <!--
                                                        
                                                                function ubbc(open, end){
                                                                        var tArea = document.getElementById("tb1");
                                                                        var isIE = (document.all)? true : false;
                                                                        var open = (open)? open : "";
                                                                        var end = (end)? end : "";
                                                                        
                                                                        if(isIE){
                                                                        tArea.focus();
                                                                        var curSelect = document.selection.createRange();
                                                                        if(arguments[2]){
                                                                        curSelect.text = open + arguments[2] + "]" + curSelect.text + end;
                                                                        } else {
                                                                        curSelect.text = open + curSelect.text + end;
                                                                        }
                                                                        } else if(!isIE && typeof tArea.selectionStart != "undefined"){
                                                                        var selStart = tArea.value.substr(0, tArea.selectionStart);
                                                                        var selEnd = tArea.value.substr(tArea.selectionEnd, tArea.value.length);
                                                                        var curSelection = tArea.value.replace(selStart, '').replace(selEnd, '');
                                                                        if(arguments[2]){
                                                                        tArea.value = selStart + open + arguments[2] + "]" + curSelection + end + selEnd;
                                                                        } else {
                                                                        tArea.value = selStart + open + curSelection + end + selEnd;
                                                                        }
                                                                        } else {
                                                                        tArea.value += (arguments[2])? open + arguments[2] + "]" + end : open + end;
                                                                        }
                                                                }
                                                                // -->
    //]]>
    </script> 
    <script>
    <![CDATA[


                                                                        function clientSideInclude(id, url) {
                                                                          var req = false;
                                                                          // For Safari, Firefox, and other non-MS browsers
                                                                          if (window.XMLHttpRequest) {
                                                                                try {
                                                                                  req = new XMLHttpRequest();
                                                                                } catch (e) {
                                                                                  req = false;
                                                                                }
                                                                          } else if (window.ActiveXObject) {
                                                                                // For Internet Explorer on Windows
                                                                                try {
                                                                                  req = new ActiveXObject("Msxml2.XMLHTTP");
                                                                                } catch (e) {
                                                                                  try {
                                                                                        req = new ActiveXObject("Microsoft.XMLHTTP");
                                                                                  } catch (e) {
                                                                                        req = false;
                                                                                  }
                                                                                }
                                                                          }
                                                                         var element = document.getElementById(id);
                                                                         if (!element) {
                                                                          alert("Bad id " + id +
                                                                           "passed to clientSideInclude." +
                                                                           "You need a div or span element " +
                                                                           "with this id in your page.");
                                                                          return;
                                                                         }
                                                                          if (req) {
                                                                                // Synchronous request, wait till we have it all
                                                                                req.open('GET', url, false);
                                                                                req.send(null);
                                                                                element.innerHTML = req.responseText;
                                                                          } else {
                                                                                element.innerHTML =
                                                                           "Sorry, your browser does not support " +
                                                                                  "XMLHTTPRequest objects. This page requires " +
                                                                                  "Internet Explorer 5 or better for Windows, " +
                                                                                  "or Firefox for any system, or Safari. Other " +
                                                                                  "compatible browsers may also exist.";
                                                                          }
                                                                        }
    ]]>
    </script> 
    <script type="text/javascript" language="JavaScript">
    //<![CDATA[


                                                                var i = 0;
                                                                
                                                                function doit() {
                                                                                           i--;
                                                                                           if (i<=0) {
                                                                                                                                clientSideInclude("prev","preview.php?quest="
                                                                                                                                +document.getElementById("tb1").value
                                                                                                                                .replace(/\r\n|\n/g,"<br>"));
                                                                                                                  }
                                                                        }
                                                        
                                                                function loadframe()
                                                                {       
                                                                        i++;    
                                                                        setTimeout("doit()", 1000);
                                                                }
                                                                
                                                                loadframe();
    //]]>
    </script>
    <form action="?do=post" name='form' onsubmit="return check();" method="post" target="_self" enctype="multipart/form-data" id="form">
      <table class="maintable">
        <thead>
          <tr>
            <th colspan="2">Add Quest to Database</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan="2"><input name="" type="image" class="button" value="submit" src="img/submit.jpg" alt="submit" /><a href='?'><img class='button' src="img/cancel.jpg" width="66" height="19" /></a></td>
          </tr>
        </tfoot>
        <tbody>
          <tr>
            <td width="359px">Quest Name:</td>
            <td><input name="QUname" type="text" /></td>
          </tr>
          <tr>
            <td>Start-NPC:</td>
            <td><input name="QUstartnpc" type="text" /></td>
          </tr>
          <tr>
            <td>Quest Text (<a href='help.html' target="_blank">help</a>):</td>
            <td>
              <input onmouseup="loadframe();" type="button" value="Monster" onclick="ubbc('[MONS]', '[/MONS]')" /><input onmouseup="loadframe();" type="button" value="NPC" onclick="ubbc('[NPC]', '[/NPC]')" /><input onmouseup="loadframe();" type="button" value="Item" onclick="ubbc('[ITEM]', '[/ITEM]')" /><input onmouseup="loadframe();" type="button" value="TEXT" onclick="ubbc('[TEXT]', '[/TEXT]')" /><input onmouseup="loadframe();" type="button" value="Quest" onclick="ubbc('[QUEST]', '[/QUEST]')" /><br />
              <textarea onkeyup="loadframe();" id="tb1" name="QUtext" rows="10" cols="80"></textarea><br />
              <div id="prev"></div>
              <script src="/content/label.js" type="text/javascript"></script>
              <div style="position:relative; text-align:center;" id='maporg'>
                <div id="label" style="display:none; position:absolute; border-style: solid; background-color: white; padding: 1px; max-width: 300px; border-width:1px;">
                  Content goes here.
                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>Total exp-gain:</td>
            <td><input name="QUexp" type="text" /></td>
          </tr>
          <tr>
            <td>Total coin-gain:</td>
            <td><input name="QUcoin" type="text" /></td>
          </tr>
          <tr>
            <td>Level req.:</td>
            <td><input name="QUlvlreq" value="" type="text" /></td>
          </tr>
          <tr>
            <td>Summary:</td>
            <td>
            <textarea name="QUsum" rows="3" cols="30"></textarea></td>
          </tr>
          <tr>
            <td>Quest Typ:</td>
            <td><select name="QUtyp">
              <option value="other" selected="selected">
                other
              </option>
              <option value="collect">
                collect
              </option>
              <option value="kill">
                kill
              </option>
              <option value="deliver">
                deliver
              </option>
            </select></td>
          </tr>
          <tr>
            <td>Note (if it fits nowhere else):</td>
            <td>
            <textarea name="QUnote" rows="3" cols="30"></textarea></td>
          </tr>
          <tr>
            <td class="topic" colspan="2">Confirm your Identity</td>
          </tr>
          <tr>
            <td>Username:</td>
            <td><input name="username" type="text" /></td>
          </tr>
          <tr>
            <td>Password:</td>
            <td><input name="userpw" type="password" /></td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</body>
</html>
